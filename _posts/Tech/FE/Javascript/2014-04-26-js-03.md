---
layout: post
title: Javascript函数表达式
category: Tech
tags: Javascript
type: FE
---

###函数表达式
+ #####函数表达式即是下面这样的形式:
	
		var test = function()
		{
			//dosomething;
		}

+ #####函数递归

		function factorial(num)
		{
			if(num < 1)
			{
				return 1;
			}
			else
			{
				return num * factorial(num-1);
			}
		}

		##对于上面的函数我们如果像下面这样调用时就会出错
		var test = factorial;
		factorial = null;
		alert(test(3));      //error, 因为函数中递归调用的factorial已经被设置null

		##所以我们可以作如下更改

		//arguments.callee指向正在运行的函数的指针,但是不是什么时候都可以访问这个值(严格模式不行)
		return num * arguments.callee(num-1);   

		##所以还可以使用函数表达式的方法:
		var factorial = (function f(num)
		{
			if(num < 1)
			{
				return 1;
			}
			else
			{
				return num * f(num-1);
			}
		});

###闭包

+ 闭包指的是有权访问另一个函数作用域中变量的函数,一般创建闭包就是在一个函数内部创建另一个函数,但是因为闭包会包含其他函数的作用域,所以会占用较多内存,因此使用闭包时需要谨慎.
+ 闭包只能取得包含函数中任何变量的最后一个值,因此下面函数的结果是输出10个10
		
		function test()
		{
			var ans = new Array();
			for(var i = 0; i < 10; ++i)
			{
				ans[i] = function()
				{
					return i;
				};
			}

			return ans;
		}	

		##所以为了得到想要的结果,可以通过创建匿名函数
		function test()
		{
			var ans = new Array();
			for(var i = 0; i < 10; ++i)
			{
				ans[i] = function(num)
				{
					return function()
					{
						return num;
					};
				}(i);
			}

			return ans;
		}
